version: '3.7'

services:
  bot:
    image: python:alpine
    container_name: boalo_bot
    build: .
    environment:
      - BOT_API_KEY=
      - ENGINE_URI=
        #postgresql://wowuser:wowpass@localhost:5010/wowdb
      - TELEGRAM_ADMIN_ID=
    volumes:
      - /etc/ocserv:/etc/ocserv
    depends_on:
      - db
  ocserv:
    image: vimagick/ocserv
    container_name: boalo_ocserv
    ports:
      - "4443:443/tcp"
      - "4443:443/udp"
    environment:
      - VPN_DOMAIN=vpn.easypi.pro
      - VPN_NETWORK=10.20.30.0
      - VPN_NETMASK=255.255.255.0
      - LAN_NETWORK=192.168.0.0
      - LAN_NETMASK=255.255.0.0
    volumes:
      - /etc/ocserv:/etc/ocserv
    restart: always
  db:
    image: postgres:alpine
    container_name: boalo_db
    restart: always
    environment:
      - POSTGRES_DB=wowdb
      - POSTGRES_USER=wowuser
      - POSTGRES_PASSWORD=wowpass
      - PG_DATA=/var/lib/postgresql/data/pgdata
